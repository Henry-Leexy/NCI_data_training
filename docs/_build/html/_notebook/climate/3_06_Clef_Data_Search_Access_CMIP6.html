

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Xarray Access CMIP6 Data from NCI &mdash; NCI data training  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> NCI data training
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../_overview/overview.html">Overview</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Info</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../_data/where_to_find_data.html">Where to Find Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_data/where_to_get_data.html">Where to Get Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_data/how_to_use_data.html">How to Use Data</a></li>
</ul>
<p class="caption"><span class="caption-text">How to run Jupyter notebooks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../prep/install_jupyter.html">On your local machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prep/python_on_vdi.html">On the VDI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prep/pangeo.html">On Gadi</a></li>
</ul>
<p class="caption"><span class="caption-text">Notebook examples grouped by theme</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="climate.html">Climate and Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eo/eo.html">Earth Observation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geophysics/geophysics.html">Geophysics</a></li>
</ul>
<p class="caption"><span class="caption-text">Notebook examples grouped by service type</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tds/tds.html">THREDDS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gsky/gsky.html">GSKY</a></li>
</ul>
<p class="caption"><span class="caption-text">Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../_help/help.html">Help</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">NCI data training</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Xarray Access CMIP6 Data from NCI</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/_notebook/climate/3_06_Clef_Data_Search_Access_CMIP6.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Xarray-Access-CMIP6-Data-from-NCI">
<h1>Xarray Access CMIP6 Data from NCI<a class="headerlink" href="#Xarray-Access-CMIP6-Data-from-NCI" title="Permalink to this headline">¶</a></h1>
<p>In this notebook we demonstrate:</p>
<ul class="simple">
<li>Use Clef CMIPs data searching tool</li>
<li>Programmatic access CMIP6 data</li>
</ul>
<p>This example uses Coupled Model Intercomparison Project (CMIP6) collections. For more information, please visit <a class="reference external" href="https://geonetwork.nci.org.au/geonetwork/srv/eng/catalog.search#/metadata/f6600_2266_8675_3563">data catalogue</a> and <a class="reference external" href="https://pcmdi.llnl.gov/CMIP6/TermsOfUse/TermsOfUse6-1.html">terms of use</a>.</p>
<hr class="docutils" />
<ul class="simple">
<li>Authors: NCI Virtual Research Environment Team</li>
<li>Keywords: CMIP, Clef, Xarray</li>
<li>Create Date: 2019-Nov; Update Date: 2020-Apr</li>
</ul>
<div class="section" id="Prerequisite">
<h2>Prerequisite<a class="headerlink" href="#Prerequisite" title="Permalink to this headline">¶</a></h2>
<p>To run this notebook on Gadi/VDI, or on your local computer. The following modules are needed:</p>
<ul class="simple">
<li>Clef</li>
<li>Xarray</li>
</ul>
<p>You also need to be a member of the following data project to access the data: * oi10</p>
<p>You can request to join the project through <a class="reference external" href="https://my.nci.org.au">NCI’s user account management system</a>.</p>
<div class="section" id="Clef">
<h3>Clef<a class="headerlink" href="#Clef" title="Permalink to this headline">¶</a></h3>
<p>Clef searches the Earth System Grid Federation datasets stored at the Australian National Computational Infrastructure, both data published on the NCI ESGF node as well as files that are locally replicated from other ESGF nodes. For more information about the tool, please visit <a class="reference external" href="https://clef.readthedocs.io/en/latest/gettingstarted.html">Clef’s documentation site</a>.</p>
<p>Currently it searches for the following datasets:</p>
<ul class="simple">
<li>CMIP5 raijin projects: rr3, where NCI is the primary publisher and al33 for replicas</li>
<li>CMIP6 raijin projects: oi10 for replicas</li>
</ul>
<p>We use Clef to search CMIP5 data path. Clef is available within /g/data/hh5/public/modules analysis3 packages.</p>
<div class="section" id="Load-Clef">
<h4>Load Clef<a class="headerlink" href="#Load-Clef" title="Permalink to this headline">¶</a></h4>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">!</span>module use /g/data3/hh5/public/modules
<span class="o">!</span>module load analysis3-20.04
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="Import-python-package">
<h2>Import python package<a class="headerlink" href="#Import-python-package" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</div>
<div class="section" id="Use-Clef--cmip6-to-serach-data">
<h2>Use Clef -cmip6 to serach data<a class="headerlink" href="#Use-Clef--cmip6-to-serach-data" title="Permalink to this headline">¶</a></h2>
<p>First, check out help information to see search options in clef cmip6.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">!</span>clef cmip6 --help
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Usage: clef cmip6 [OPTIONS] [QUERY]...

  Search ESGF and local database for CMIP6 files

  Constraints can be specified multiple times, in which case they are
  combined    using OR: -v tas -v tasmin will return anything matching
  variable = &#39;tas&#39; or variable = &#39;tasmin&#39;. The --latest flag will check ESGF
  for the latest version available, this is the default behaviour

Options:
  -mip, --activity [AerChemMIP|C4MIP|CDRMIP|CFMIP|CMIP|CORDEX|DAMIP|DCPP|DynVarMIP|FAFMIP|GMMIP|GeoMIP|HighResMIP|ISMIP6|LS3MIP|LUMIP|OMIP|PAMIP|PMIP|RFMIP|SIMIP|ScenarioMIP|VIACSAB|VolMIP]
  -e, --experiment x              CMIP6 experiment, list of available depends
                                  on activity
  --source_type [AER|AGCM|AOGCM|BGC|CHEM|ISM|LAND|OGCM|RAD|SLAB]
  -t, --table x                   CMIP6 CMOR table: Amon, SIday, Oday ...
  -m, --model, --source_id x      CMIP6 model id: GFDL-AM4, CNRM-CM6-1 ...
  -v, --variable x                CMIP6 variable name as in filenames
  -mi, --member TEXT              CMIP6 member id: &lt;sub-exp-id&gt;-r#i#p#f#
  -g, --grid, --grid_label TEXT   CMIP6 grid label: i.e. gn for the model
                                  native grid
  -nr, --resolution, --nominal_resolution TEXT
                                  Approximate resolution: &#39;250 km&#39;, pass in
                                  quotes
  --frequency [1hr|1hrCM|1hrPt|3hr|3hrPt|6hr|6hrPt|day|dec|fx|mon|monC|monPt|subhrPt|yr|yrPt]
  --realm [atmos|ocean|land|landIce|seaIce|aerosol|atmosChem|ocnBgchem]
  -se, --sub_experiment_id TEXT   Only available for hindcast and forecast
                                  experiments: sYYYY
  -vl, --variant_label TEXT       Indicates a model variant: r#i#p#f#
  --and [variable_id|experiment_id|table_id|realm|frequency|member_id|source_id|source_type|activity_id|grib_label|nominal_resolution|sub_experiment_id]
                                  Attributes for which we want to add AND
                                  filter, i.e. -v tasmin -v tasmax --and
                                  variable_id will return only model/ensemble
                                  that have both
  --institution TEXT              Modelling group institution id: IPSL, NOAA-
                                  GFDL ...
  --cf_standard_name TEXT         CF variable standard_name, use instead of
                                  variable constraint
  --format [file|dataset]         Return output for datasets (default) or
                                  individual files
  --latest / --all-versions       Return only the latest version or all of
                                  them. Default: --latest
  --replica / --no-replica        Return both original files and replicas.
                                  Default: --no-replica
  --distrib / --no-distrib        Distribute search across all ESGF nodes.
                                  Default: --distrib
  --debug / --no-debug            Show debug output. Default: --no-debug
  --help                          Show this message and exit.
</pre></div></div>
</div>
<p>Then, we will search available temperature and precipitation data in ScenarioMIP. See example below:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">!</span>clef cmip6  --activity ScenarioMIP  --experiment  ssp126 --member r1i1p1f2 --table Amon  --variable tas   --grid gr
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/g/data1b/oi10/replicas/CMIP6/ScenarioMIP/CNRM-CERFACS/CNRM-CM6-1/ssp126/r1i1p1f2/Amon/tas/gr/v20190219/
/g/data1b/oi10/replicas/CMIP6/ScenarioMIP/CNRM-CERFACS/CNRM-ESM2-1/ssp126/r1i1p1f2/Amon/tas/gr/v20190328/

Everything available on ESGF is also available locally
</pre></div></div>
</div>
<p>We can then set up values for CMIP6 attributions according to the CleF search results.</p>
<p>CMIP6 data are organised according to its global attributes. We can access different data by changing attributes from the below directory: <strong>/g/data1b/oi10/replicas/CMIP6/activity_id/institution_id/source_id/experiment_id /member_id/table_id/variable/grid_label/version/</strong></p>
<p>For more information about CMIP6 drs tree (for more information, see this <a class="reference external" href="https://docs.google.com/document/d/1h0r8RZr_f3-8egBMMh7aqLwy3snpD6_MrDz1q8n5XUk/edit">documentation</a>.</p>
<p>In SenarioMIP there are four future pathways of societal development, the Shared Socioeconomic Pathways (SSPs), in which ssp126 is the lowest emission scenario. For information about SenarioMIP scenarios, see here <a class="reference external" href="https://www.geosci-model-dev.net/9/3461/2016/">https://www.geosci-model-dev.net/9/3461/2016/</a></p>
<p>Below, we have set up these attributes in order to get the future projection data under the ssp126 scenario using member ‘r1i1p1f2’ of CNRM_CM6-1 model simulations as an example.</p>
<div class="admonition warning">
NOTE: Due to different DRS (Directory Reference Structure) between CMIP5 and CMIP6, search syntax using clef is slightly different between two datasets. They have to be strictly consistent with each DRS tree and they are also case sensitive.</div>
<p>Below is an example of using wrong DRS structure to search CMIP data.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">!</span>clef cmip5  --activity ScenarioMIP  --source_id  CNRM-CM6-1 --table Amon  --variable tas  --variable pr   --grid gr
</pre></div>
</div>
</div>
</div>
<div class="section" id="Use-Xarray-to-open-data">
<h2>Use Xarray to open data<a class="headerlink" href="#Use-Xarray-to-open-data" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cmip6Dir</span><span class="o">=</span><span class="s1">&#39;/g/data/oi10/replicas/CMIP6&#39;</span>
<span class="n">activity</span><span class="o">=</span><span class="s1">&#39;ScenarioMIP&#39;</span>
<span class="n">institute</span><span class="o">=</span><span class="s1">&#39;CNRM-CERFACS&#39;</span>
<span class="n">source</span><span class="o">=</span><span class="s1">&#39;CNRM-CM6-1&#39;</span>
<span class="n">experiment</span><span class="o">=</span><span class="s1">&#39;ssp126&#39;</span>
<span class="n">member</span><span class="o">=</span><span class="s1">&#39;r1i1p1f2&#39;</span>
<span class="n">table</span><span class="o">=</span><span class="s1">&#39;Amon&#39;</span>
<span class="n">variable</span><span class="o">=</span><span class="s1">&#39;tas&#39;</span>
<span class="n">grid</span><span class="o">=</span><span class="s1">&#39;gr&#39;</span>
<span class="n">version</span><span class="o">=</span><span class="s1">&#39;v20190219&#39;</span>
<span class="n">period</span><span class="o">=</span><span class="s1">&#39;201501-210012&#39;</span>
<span class="n">ds</span><span class="o">=</span><span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">+</span><span class="n">cmip6Dir</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">activity</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">institute</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">source</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">experiment</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">member</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">table</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">variable</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">grid</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">version</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">variable</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">table</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">source</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">experiment</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">member</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">grid</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">period</span><span class="o">+</span><span class="s1">&#39;.nc&#39;</span><span class="p">)</span>
<span class="n">tas</span><span class="o">=</span><span class="n">ds</span><span class="o">.</span><span class="n">tas</span>
<span class="n">tas</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<pre>&lt;xarray.DataArray &#x27;tas&#x27; (time: 1032, lat: 128, lon: 256)&gt;
[33816576 values with dtype=float32]
Coordinates:
  * lat      (lat) float64 -88.93 -87.54 -86.14 -84.74 ... 86.14 87.54 88.93
  * lon      (lon) float64 0.0 1.406 2.812 4.219 ... 354.4 355.8 357.2 358.6
    height   float64 ...
  * time     (time) datetime64[ns] 2015-01-16T12:00:00 ... 2100-12-16T12:00:00
Attributes:
    online_operation:    average
    cell_methods:        area: time: mean
    interval_operation:  900 s
    interval_write:      1 month
    standard_name:       air_temperature
    description:         Near-Surface Air Temperature
    long_name:           Near-Surface Air Temperature
    history:             none
    units:               K
    cell_measures:       area: areacella</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cmip6Dir</span><span class="o">=</span><span class="s1">&#39;/g/data/oi10/replicas/CMIP6&#39;</span>
<span class="n">activity</span><span class="o">=</span><span class="s1">&#39;ScenarioMIP&#39;</span>
<span class="n">institute</span><span class="o">=</span><span class="s1">&#39;CNRM-CERFACS&#39;</span>
<span class="n">source</span><span class="o">=</span><span class="s1">&#39;CNRM-CM6-1&#39;</span>
<span class="n">experiment</span><span class="o">=</span><span class="s1">&#39;ssp126&#39;</span>
<span class="n">member</span><span class="o">=</span><span class="s1">&#39;r1i1p1f2&#39;</span>
<span class="n">table</span><span class="o">=</span><span class="s1">&#39;Amon&#39;</span>
<span class="n">variable</span><span class="o">=</span><span class="s1">&#39;pr&#39;</span>
<span class="n">grid</span><span class="o">=</span><span class="s1">&#39;gr&#39;</span>
<span class="n">version</span><span class="o">=</span><span class="s1">&#39;v20190219&#39;</span>
<span class="n">period</span><span class="o">=</span><span class="s1">&#39;201501-210012&#39;</span>
<span class="n">ds</span><span class="o">=</span><span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">+</span><span class="n">cmip6Dir</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">activity</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">institute</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">source</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">experiment</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">member</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">table</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">variable</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">grid</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">version</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">variable</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">table</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">source</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">experiment</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">member</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">grid</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">period</span><span class="o">+</span><span class="s1">&#39;.nc&#39;</span><span class="p">)</span>
<span class="n">pr</span><span class="o">=</span><span class="n">ds</span><span class="o">.</span><span class="n">pr</span>
<span class="n">pr</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<pre>&lt;xarray.DataArray &#x27;pr&#x27; (time: 1032, lat: 128, lon: 256)&gt;
[33816576 values with dtype=float32]
Coordinates:
  * lat      (lat) float64 -88.93 -87.54 -86.14 -84.74 ... 86.14 87.54 88.93
  * lon      (lon) float64 0.0 1.406 2.812 4.219 ... 354.4 355.8 357.2 358.6
  * time     (time) datetime64[ns] 2015-01-16T12:00:00 ... 2100-12-16T12:00:00
Attributes:
    long_name:           Precipitation
    units:               kg m-2 s-1
    online_operation:    average
    cell_methods:        area: time: mean
    interval_operation:  900 s
    interval_write:      1 month
    standard_name:       precipitation_flux
    description:         at surface; includes both liquid and solid phases fr...
    history:             none
    cell_measures:       area: areacella</pre></div>
</div>
<p>Now show the multiple files:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">!</span>ls /g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cmip6Dir</span><span class="o">=</span><span class="s1">&#39;/g/data/oi10/replicas/CMIP6&#39;</span>
<span class="n">activity</span><span class="o">=</span><span class="s1">&#39;CMIP&#39;</span>
<span class="n">institute</span><span class="o">=</span><span class="s1">&#39;CNRM-CERFACS&#39;</span>
<span class="n">source</span><span class="o">=</span><span class="s1">&#39;CNRM-CM6-1&#39;</span>
<span class="n">experiment</span><span class="o">=</span><span class="s1">&#39;historical&#39;</span>
<span class="n">member</span><span class="o">=</span><span class="s1">&#39;r1i1p1f2&#39;</span>
<span class="n">table</span><span class="o">=</span><span class="s1">&#39;3hr&#39;</span>
<span class="n">variable</span><span class="o">=</span><span class="s1">&#39;pr&#39;</span>
<span class="n">grid</span><span class="o">=</span><span class="s1">&#39;gr&#39;</span>
<span class="n">version</span><span class="o">=</span><span class="s1">&#39;v20180917&#39;</span>
<span class="n">files</span><span class="o">=</span><span class="p">[</span><span class="n">f</span><span class="s1">&#39;</span><span class="si">{cmip6Dir}</span><span class="s1">/</span><span class="si">{activity}</span><span class="s1">/</span><span class="si">{institute}</span><span class="s1">/</span><span class="si">{source}</span><span class="s1">/</span><span class="si">{experiment}</span><span class="s1">/</span><span class="si">{member}</span><span class="s1">/</span><span class="si">{table}</span><span class="s1">/</span><span class="si">{variable}</span><span class="s1">/</span><span class="si">{grid}</span><span class="s1">/</span><span class="si">{version}</span><span class="s1">/</span><span class="si">{variable}</span><span class="s1">_</span><span class="si">{table}</span><span class="s1">_</span><span class="si">{source}</span><span class="s1">_</span><span class="si">{experiment}</span><span class="s1">_</span><span class="si">{member}</span><span class="s1">_</span><span class="si">{grid}</span><span class="s1">_</span><span class="si">{year}</span><span class="s1">01010130-{year+9}12312230.nc&#39;</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1850</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
<span class="n">files</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>[&#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_185001010130-185912312230.nc&#39;,
 &#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_186001010130-186912312230.nc&#39;,
 &#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_187001010130-187912312230.nc&#39;,
 &#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_188001010130-188912312230.nc&#39;,
 &#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_189001010130-189912312230.nc&#39;,
 &#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_190001010130-190912312230.nc&#39;,
 &#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_191001010130-191912312230.nc&#39;,
 &#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_192001010130-192912312230.nc&#39;,
 &#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_193001010130-193912312230.nc&#39;,
 &#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_194001010130-194912312230.nc&#39;,
 &#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_195001010130-195912312230.nc&#39;,
 &#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_196001010130-196912312230.nc&#39;,
 &#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_197001010130-197912312230.nc&#39;,
 &#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_198001010130-198912312230.nc&#39;,
 &#39;/g/data/oi10/replicas/CMIP6/CMIP/CNRM-CERFACS/CNRM-CM6-1/historical/r1i1p1f2/3hr/pr/gr/v20180917/pr_3hr_CNRM-CM6-1_historical_r1i1p1f2_gr_199001010130-199912312230.nc&#39;]
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds</span><span class="o">=</span><span class="n">xr</span><span class="o">.</span><span class="n">open_mfdataset</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
<span class="n">pr</span><span class="o">=</span><span class="n">ds</span><span class="o">.</span><span class="n">pr</span>
<span class="n">pr</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Summary">
<h2>Summary<a class="headerlink" href="#Summary" title="Permalink to this headline">¶</a></h2>
<p>In this example, we show how to use Clef tool to search the available CMIP6 data on Gadi and use xarray to open one dataset or programmatically open multiple datasets at onece based on CMIP6 Directory Reference Structure.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, NCI

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>